- hosts: localhost
  connection: local
  gather_facts: false
  tasks:
  - name: Assume role
    community.aws.sts_assume_role:
      role_arn: "arn:aws:iam::603651671970:role/ReplatformPipelineBuildRole"
      role_session_name: "someRoleSession"
      region: "ap-south-1"
    register: assumed_role
  - debug:
      msg: "{{ assumed_role.sts_creds.access_key }}"
  - debug:
      msg: "{{ assumed_role.sts_creds.secret_key }}"
  - debug:
      msg: "{{ assumed_role.sts_creds.session_token }}"
      
  - amazon.aws.ec2_tag:
      aws_access_key: "{{ assumed_role.sts_creds.access_key }}"
      aws_secret_key: "{{ assumed_role.sts_creds.secret_key }}"
      security_token: "{{ assumed_role.sts_creds.session_token }}"
      resource: i-04c65d0ccd987d26f
      state: present
      tags:
        Name: test
      
